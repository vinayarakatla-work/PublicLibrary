CREATE DATABASE library;

USE library;

-- Books
ALTER TABLE Books MODIFY Publisher VARCHAR(100) NOT NULL;
CREATE TABLE IF NOT EXISTS Books(

    BookID      INT             PRIMARY KEY,
    Title       VARCHAR(100) NOT NULL,
    Author      VARCHAR(100) NOT NULL,
    Publisher   VARCHAR(20)  NOT NULL,
    YearPublished   INT,
    Genre       VARCHAR(20)
);

-- Members
ALTER TABLE Members MODIFY MemberID VARCHAR(10);
CREATE TABLE IF NOT EXISTS Members(

    MemberID	    VARCHAR(10)	Primary Key,
    FirstName	    VARCHAR(255),
    LastName	    VARCHAR(255),
    DateOfBirth	    DATE,
    Address	        VARCHAR(255),
    PhoneNumber	    VARCHAR(20),
    Email	        VARCHAR(255),
    MembershipDate	DATE
);

-- Staff

CREATE TABLE IF NOT EXISTS Staff(

    StaffID INT PRIMARY KEY,
    FirstName VARCHAR(255) NOT NULL,
    LastName VARCHAR(255) NOT NULL,
    Position VARCHAR(255) NOT NULL,
    DateHired DATE,
    PhoneNumber VARCHAR(20),
    Email VARCHAR(255)
);


-- Transactions
ALTER TABLE Transactions MODIFY MemberID VARCHAR(10) NOT NULL;

CREATE TABLE IF NOT EXISTS Transactions(


                                           TransactionID	  INT	 Primary Key,
                                           BookID	          INT,
                                           MemberID	      VARCHAR(10),
                                           StaffID	          INT,
                                           DateBorrowed	  DATE,
                                           DueDate	          DATE,
                                           DateReturned	  DATE,
                                           FineAmount	      DECIMAL(5,2),
                                           FOREIGN KEY (BookID) REFERENCES Books(BookID),
                                           FOREIGN KEY (MemberID) REFERENCES Members(MemberID),
                                           FOREIGN KEY (StaffID) REFERENCES Staff(StaffID)

);
